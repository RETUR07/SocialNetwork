version: "3.9"

services:

  rabbitmq: # login guest:guest
    image: rabbitmq:3-management-alpine
    hostname: "rabbitmq"
    labels:
      NAME: "rabbitmq"
    ports:
    - "5672:5672"
    - "15672:15672"
    
    
  web:
    image: retur/retur_web:165
    ports:
      - "5050:80"
    depends_on:
      - rabbitmq
    environment:
      - JWT:Secret=${SecretJWTKey}
      - ASPNETCORE_ENVIRONMENT=Development
      - ConnectionStrings:sqlConnection=${ConnectionToDB}
      - ConnectionStrings:AzureBlobStorage=${ConnectionToBlob}
    restart: on-failure


    
  worker:
    image: retur/retur_worker:165
    ports:
      - "8080:5000"
    depends_on:
      - rabbitmq
    environment:
      - ASPNETCORE_URLS=http://+:5000
      - ASPNETCORE_ENVIRONMENT=Development
      - ConnectionStrings:sqlConnection=${ConnectionToDB}
    restart: on-failure

